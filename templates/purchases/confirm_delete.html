{% extends "base.html" %}

{% block title %}Supprimer l'achat{% endblock %}
{% block nav_purchases %}active{% endblock %}

{% block page_title %}Supprimer l'achat{% endblock %}
{% block page_sub_text %}Cette action est irréversible{% endblock %}

{% block extra_css %}
.action-btn {
    display: inline-flex;
    align-items: center;
    gap: 7px;
    border-radius: var(--radius-sm);
    padding: 9px 16px;
    font-family: 'Syne', sans-serif;
    font-weight: 600;
    font-size: 13px;
    text-decoration: none;
    transition: all var(--transition);
    cursor: pointer;
    border: none;
    min-height: 44px;
}
.action-btn-ghost {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-secondary);
}
.action-btn-ghost:hover { background: var(--bg-hover); border-color: var(--border-strong); color: var(--text-primary); }
.action-btn-danger {
    background: rgba(220,38,38,.08);
    color: #dc2626;
    border: 1px solid rgba(220,38,38,.20);
}
.action-btn-danger:hover { background: rgba(220,38,38,.14); }
{% endblock %}

{% block content %}
<div style="max-width:540px;margin:0 auto;">
    <div style="background:var(--bg-surface);border:1px solid rgba(220,38,38,.25);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-sm);">

        <!-- Header -->
        <div style="padding:20px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;">
            <div style="width:40px;height:40px;border-radius:var(--radius-sm);background:rgba(220,38,38,.10);color:#dc2626;display:grid;place-items:center;font-size:18px;flex-shrink:0;">
                <i class="bi bi-trash"></i>
            </div>
            <div>
                <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:15px;color:var(--text-primary);">Confirmer la suppression</div>
                <div style="font-size:12px;color:var(--text-muted);margin-top:2px;">Achat du {{ purchase.purchase_date|date:"j M Y" }}</div>
            </div>
        </div>

        <!-- Body -->
        <div style="padding:24px;">
            <p style="font-size:13.5px;color:var(--text-secondary);line-height:1.7;margin:0 0 16px;">
                Vous êtes sur le point de supprimer l'achat suivant :
            </p>

            <!-- Purchase summary -->
            <div style="background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--radius-md);padding:14px 16px;margin-bottom:20px;display:flex;flex-direction:column;gap:8px;">
                <div style="display:flex;justify-content:space-between;font-size:13px;">
                    <span style="color:var(--text-muted);">Fournisseur</span>
                    <span style="color:var(--text-primary);font-weight:500;">{{ purchase.supplier.name }}</span>
                </div>
                <div style="display:flex;justify-content:space-between;font-size:13px;">
                    <span style="color:var(--text-muted);">Date d'achat</span>
                    <span style="color:var(--text-primary);">{{ purchase.purchase_date|date:"j M Y" }}</span>
                </div>
                <div style="display:flex;justify-content:space-between;font-size:13px;">
                    <span style="color:var(--text-muted);">Prix FOB</span>
                    <span style="color:var(--text-primary);">{{ purchase.purchase_price_fob|floatformat:2 }} {{ purchase.currency.code }}</span>
                </div>
                {% if purchase.purchase_price_da %}
                <div style="display:flex;justify-content:space-between;font-size:13px;">
                    <span style="color:var(--text-muted);">Prix (DA)</span>
                    <span style="font-family:'Syne',sans-serif;font-weight:700;color:var(--accent);">{{ purchase.purchase_price_da|floatformat:0 }} DA</span>
                </div>
                {% endif %}
            </div>

            <!-- Warning -->
            <div style="background:rgba(220,38,38,.07);border:1px solid rgba(220,38,38,.18);border-radius:var(--radius-md);padding:12px 14px;margin-bottom:24px;">
                <div style="font-size:12.5px;color:#dc2626;line-height:1.6;">
                    <i class="bi bi-exclamation-triangle me-1"></i>
                    <strong>Attention :</strong> tous les frais de transport, déclarations douanières et données associées seront également supprimés.
                </div>
            </div>

            <!-- Actions -->
            <form method="post">
                {% csrf_token %}
                <div style="display:flex;gap:10px;flex-wrap:wrap;">
                    <button type="submit" class="action-btn action-btn-danger" style="flex:1;justify-content:center;">
                        <i class="bi bi-trash"></i> Confirmer la suppression
                    </button>
                    <a href="{% url 'purchases:detail' purchase.pk %}" class="action-btn action-btn-ghost" style="flex:1;justify-content:center;">
                        <i class="bi bi-x-lg"></i> Annuler
                    </a>
                </div>
            </form>
        </div>

    </div>
</div>
{% endblock %}